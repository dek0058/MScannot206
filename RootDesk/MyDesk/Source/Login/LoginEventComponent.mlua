@Component
script LoginEventComponent extends Component
	
	property Entity LoginButton = nil
	property Entity LoginBuffer = nil
	
	method void SetLoginButtonVisible(boolean value)
		if self.LoginButton ~= nil then
			self.LoginButton.Visible = value
		end
	end
	
	method void SetLoginButtonClickEnable(boolean value)
		if self.LoginButton == nil then
			return
		end
		
		---@type ButtonComponent
		local buttonCom = self.LoginButton:GetComponent(ButtonComponent)
		if buttonCom ~= nil then
			buttonCom.Enable = value
		end
	end
	
	method void SetLoginBufferVisible(boolean value)
		if self.LoginBuffer ~= nil then
			self.LoginBuffer.Visible = value
		end
	end
	
	@ExecSpace("ClientOnly")
	@EventSender("Entity", "d14a049c-6595-4788-8828-34b7bdff14eb")
	handler HandleButtonClickEvent(ButtonClickEvent event)
		_LoginLogic:RequestLogin(_UserService.LocalPlayer.PlayerComponent.UserId)
		
		self:SetLoginButtonClickEnable(false)
		self:SetLoginBufferVisible(true)
	end
	
	@ExecSpace("ClientOnly")
	@EventSender("LocalPlayer")
	handler HandleLoginCompleteEvent(LoginCompleteEvent event)
		log("로그인 성공...")
		
		-- self:SetLoginButtonClickEnable(true)
		self:SetLoginBufferVisible(false)
	end
	
	@ExecSpace("ClientOnly")
	@EventSender("LocalPlayer")
	handler HandleLoginFailureEvent(LoginFailureEvent event)
		log("로그인 실패...")
		
		self:SetLoginButtonClickEnable(true)
		self:SetLoginBufferVisible(false)
	end
	
end